function getRandom(){for(var t=1e7,e=Math.random()*t;e<t;)e<<=1;return e}window.pvtrace=0,window.pvid=(new Date).getTime()+""+getRandom(),define("mip-bsml-widget/mip-bsml-widget",["require","zepto","util","performance","customElement"],function(t){function e(){if(window.customStorage)return window.customStorage;if(h.customStorage){var t=h.customStorage;window.customStorage=new t(0)}else window.customStorage={get:function(t){return window[t]},set:function(t,e){window[t]=e}};return window.customStorage}function i(){var t=e(),i=location.search.replace("?","").split("&");return c.each(i,function(e,i){var n=i.split("=");if("channel_id"===n[0])return window.bsmlChannel=n[1],t.set("bsmlChannel",window.bsmlChannel,1800),!1}),window.bsmlChannel=t.get("bsmlChannel"),window.bsmlChannel}function n(){if(window.bsmlCuid)return window.bsmlCuid;var t=e(),i=t.get("bsmlCuid");if(!i)i=getRandom(),i=""+(new Date).getTime()+i,t.set("bsmlCuid",i,2592e3);return window.bsmlCuid=i,window.bsmlCuid}function r(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),i=window.location.search.substr(1).match(e);if(null!=i)return unescape(i[2]);else return null}function o(t){if(t&&!window.disableBsmlLog){var e=r("extra_info");if(e)e=e.split("&");var o={};if(e)for(var s=0;s<e.length;s++)o[e[s].split("=")[0]]=e[s].split("=")[1];try{if("string"==typeof t)t=JSON.parse(t);var l=c("#pageinfo"),h={action_id:t.action_id?t.action_id:"site_comp_click",action_name:t.action_name?t.action_name:"普通组件点击",guid:l.attr("guid"),appid:l.attr("appid")||"",ucid:l.attr("ucid")||"",site_id:l.attr("siteid"),channel_id:i(),time_stamp:Math.round((new Date).getTime()/1e3),page_name:l.attr("pagename"),page_type:l.attr("pagetype"),refer:encodeURIComponent(document.referrer),url:encodeURIComponent(location.href),cuid:n(),extra:{},page_id:l.attr("pageid"),group_id:o.group_id||"",idea_id:r("IDEA_ID")||"",extra_idea_id:o.idea_id||""},u=this.element;if(c(u).children().attr("data-log")){var d=JSON.parse(c(u).children().attr("data-log"));c.extend(h.extra,d)}switch(h.action_id){case"site_page_show":h.extra.micro_time=(new Date).getTime();break;case"site_first_screen":h.extra.micro_time=(new Date).getTime(),h.extra.time_used=t.extra.time_used;break;case"site_bar_click":if(h.extra.type=t.type,"tel"===t.type||"msg"===t.type||"follow"===t.type)h.extra.target=t.target;if("msg"===t.type)h.extra.uuid=t.uuid;if("download"===t.type)h.extra.target=t.target||"",h.extra.click_target=t.click_target||"";break;case"site_comp_click":h.extra=a(t,u);break;case"site_comp_show":case"site_comp_hide":h.extra.comp_id=c(u).attr("id"),h.extra.comp_name=c(u).attr("name"),h.extra.comp_type=c(u).attr("type"),h.extra.micro_time=(new Date).getTime();break;case"site_page_quit":h.extra.stayed_millisecond=(new Date).getTime()-window.startTime;break;case"site_activity_click":h.extra.comp_id=c(u).parent().attr("id"),h.extra.comp_name=c(u).parent().attr("name"),h.extra.comp_type=c(u).parent().attr("type"),h.extra.micro_time=(new Date).getTime(),h.extra.activity_click_type=t.activity_click_type,h.extra.bizid=t.bizId;break;case"site_page_roll":h.extra.document_length=t.document_length,h.extra.window_height=t.window_height,h.extra.window_width=t.window_width,h.extra.stayed_millisecond=(new Date).getTime()-window.scrollTime-f,window.scrollTime=(new Date).getTime()}h.extra.pvtrace=++window.pvtrace,h.extra.pvid=window.pvid,h.extra=JSON.stringify(h.extra);var m=p+"?"+c.param(h),g=new Image;g.src=m}catch(t){}}}function a(t,e){var i=null;if(t.name&&t.type&&t.id&&t.sub_action)i={comp_id:t.id,comp_name:t.name,comp_type:t.type,sub_action:t.sub_action,video_id:t.video_id,video_length:t.video_length};else i={comp_id:c(e).attr("id"),comp_name:c(e).attr("name"),comp_type:c(e).attr("type")};return i}function s(){if(window.styleFixed||h.platform.getOsVersion(),0){window.styleFixed=!0;var t='a,hr{padding:0}a,button,input,select,textarea{margin:0}article,aside,details,figure,footer,header,hr,main,nav,section,summary{display:block}abbr,address,article,aside,audio,b,blockquote,body,body div,caption,cite,code,dd,del,details,dfn,dl,dt,em,fieldset,figure,footer,form,h1,h2,h3,h4,h5,h6,header,html,i,iframe,img,ins,kbd,label,legend,li,mark,menu,nav,object,ol,p,pre,q,samp,section,small,span,strong,sub,summary,sup,table,tbody,td,tfoot,th,thead,time,tr,ul,var,video{margin:0;padding:0;border:0;font-size:100%;font-weight:400;vertical-align:baseline;background:0 0}input[type=checkbox],th{vertical-align:bottom}html{box-sizing:border-box;overflow-y:scroll}*,:after,:before{box-sizing:inherit}embed,img,object{max-width:100%}ul{list-style:none}blockquote,q{quotes:none}blockquote:after,blockquote:before,q:after,q:before{content:’’;content:none}a{font-size:100%;vertical-align:baseline;background:0 0}del{text-decoration:line-through}abbr[title],dfn[title]{border-bottom:1px dotted #000;cursor:help}th{font-weight:700}td{font-weight:400;vertical-align:top}hr{height:1px;border:0;border-top:1px solid #ccc;margin:1em 0}input,select{vertical-align:middle}pre{white-space:pre;white-space:pre-wrap;white-space:pre-line;word-wrap:break-word}input[type=radio]{vertical-align:text-bottom}.ie7 input[type=checkbox]{vertical-align:baseline}.ie6 input{vertical-align:text-bottom}input,select,textarea{font:99% sans-serif}table{border-collapse:separate;border-spacing:0;font:100%}small{font-size:85%}strong{font-weight:700}td,td img{vertical-align:top}sub,sup{font-size:75%;line-height:0;position:relative}sup{top:-.5em}sub{bottom:-.25em}code,kbd,pre,samp{font-family:monospace,sans-serif}.clickable,button,input[type=button],input[type=file],input[type=submit],label{cursor:pointer}button,input[type=button]{width:auto;overflow:visible}.ie7 img{-ms-interpolation-mode:bicubic}.clearfix:after{content:" ";display:block;clear:both}',e=document.createElement("style");e.type="text/css",e.innerHTML=t,document.getElementsByTagName("HEAD").item(0).appendChild(e)}}function l(t){var e=t.type.replace("book","form"),i={type:e,action_id:"site_bar_click",action_name:"转化组件点击"};o.call(this,i)}window.startTime=window.scrollTime=(new Date).getTime();var c=t("zepto"),h=t("util"),u=t("performance"),d=t("customElement").create(),p="https://isite.baidu.com/v.gif",f=400;return u.on("update",function(t){if(t.MIPFirstScreen){var e=t.MIPFirstScreen-t.MIPStart,i={action_id:"site_first_screen",action_name:"首屏展现",extra:{time_used:e}};o(i),setTimeout(function(){for(var t=document.querySelectorAll("mip-img"),e=0,i=t.length;e<i;e++)MIP.prerenderElement(t[e])},200)}}),window.addLog=o,d.prototype.build=function(){var t=this.element,e=this,i=c(document).height(),n=c(window).height(),r=c(window).width();c(".body-wrapper").css({minHeight:n+"px"});var a=c(t).attr("name"),h=a.indexOf("-bar")>-1?!0:!1,u=a.indexOf("-nichang")>-1?!0:!1;if(c(t).on("click","[data-click]",function(){var t=c(this).attr("data-click");if(t){var i=JSON.parse(t);if(!h||"book"!==i.type&&"msg"!==i.type&&"tel"!==i.type)if(u)return void l.call(e,i);else return void o.call(e,t)}}),c(t).on("click",function(){o.call(e,"{}")}),!window.bsmlLog){window.bsmlLog=1,s();var d='{"action_id":"site_page_show","action_name":"页面渲染"}';o.call(e,d)}window.onunload=function(){var t='{"action_id":"site_page_quit","action_name":"页面退出打点"}';o.call(e,t)};var p=null;window.onscroll=function(){if(p)clearTimeout(p);var t='{"action_id":"site_page_roll","action_name":"页面滚动打点","document_length":"'+i+'","window_height":"'+n+'","window_width":"'+r+'"}';p=setTimeout(function(){o.call(e,t)},f)}},d.prototype.viewportCallback=function(t){var e=this,i="";if(this.viewportTimer&&!t)return clearTimeout(this.viewportTimer),void(this.viewportTimer=null);else return void(this.viewportTimer=setTimeout(function(){if(e.viewportTimer=null,t)i='{"action_id":"site_comp_show","action_name":"普通组件展现"}',o.call(e,i);else i='{"action_id":"site_comp_hide","action_name":"普通组件隐藏"}',o.call(e,i)},50))},d}),define("mip-bsml-widget",["mip-bsml-widget/mip-bsml-widget"],function(t){return t}),function(){function t(t,e){t.registerMipElement("mip-bsml-widget",e)}if(window.MIP)require(["mip-bsml-widget"],function(e){t(window.MIP,e)});else require(["mip","mip-bsml-widget"],t)}();